# 0x01 Collecte d'informations

## Aperçu de la collecte d'informations

1) Comme le dit l'adage, l'essence de la pénétration est la collecte d'informations, et l'étendue de la collecte d'informations détermine jusqu'où le test de pénétration peut aller.
2) Plus la collecte d'informations est détaillée, mieux c'est.

## Types d'informations collectées

1. informations sur le nom de domaine
2. informations sur le serveur
3. informations sur le logiciel intermédiaire
4. informations sur le port
5. informations sur le répertoire
6. informations sensibles
7. les informations relatives au site
8. les informations relatives aux travailleurs sociaux, telles que les boîtes aux lettres, les numéros de téléphone et d'autres informations sur les comptes.

## Collecte d'informations sur les noms de domaine

1) Le nom de domaine comprend le nom de domaine racine et le nom de sous-domaine. Par exemple, baidu.com, qui est le nom de domaine racine/principal, pan.baidu.com, qui est un sous-domaine.
2. avant le début du test de pénétration général, on peut savoir que les informations ne concernent principalement que le nom de domaine principal. Il faut partir du nom de domaine principal, collecter les informations d'enregistrement du site cible, les informations d'archivage, les informations DNS, les noms de sous-domaines, etc.

3. méthodes de collecte d'informations sur les noms de domaine
   - Requête Whois. Requête en ligne et le système est fourni avec un outil de requête.
   - Demande d'enregistrement. L'enregistrement concerne généralement le serveur situé en Chine continentale. S'il existe un enregistrement, le bas du site comporte généralement un numéro d'enregistrement, que l'on peut utiliser pour interroger l'enregistrement pertinent du corps principal de l'information.
4. les méthodes de collecte d'informations sur les sous-domaines :
   - Layer Sub-Domain Miner
   - oneforall
   - Plateformes de cartographie du cyberespace telles que shodan, fofa, 360quake, zoomeye, hunter, censys, etc.
   - Syntaxe Google, site : xxx.com
   - Outils en ligne tels que DNSdumpster, etc.
   - Transparence des certificats, énumération des journaux publics
   - Outils d'énumération fournis avec kali
   - k8

## 服务器信息收集

1. 主要收集服务器的系统信息、IP
2. 收集方法：
   - kali自带的whatweb
   - nmap
   - 谷歌浏览器插件Wappalyzer、WhatRuns
   - 根据linux与windows对目录大小写的敏感特性进行分辨，linux对大小写敏感，windows大小写不敏感
   - 网络空间测绘平台，如shodan、fofa、360quake、zoomeye、hunter、censys等

3. 真实IP收集：
   - 网络空间测绘平台，如shodan、fofa、360quake、zoomeye、hunter、censys等
   - 超级ping
   - 利用邮件进行识别
   - 利用子域名
   - 站点证书
   - 网站敏感文件
   - 国外在线代理网站，如https://asm.ca.com/en/ping.php
   - 查看历史解析记录
   - nslookup

## 中间件信息收集

1. 主要收集中间件的种类与版本，是否站库分离等
2. 收集方法：
   - nmap
   - whatweb
   - Wappalyzer、WhatRuns
   - 网站的server、X-Powerd-By、Cookie等信息
   - 网络空间测绘平台，如shodan、fofa、360quake、zoomeye、hunter、censys等

## 端口信息

1. 根据端口可以判断服务器系统类型，针对性的利用不同的主机漏洞，如21端口与22端口的未授权访问与口令爆破、windows系统445端口的ms17010、windows系统3389端口的cve-2019-0708等
2. 收集方法
   - nmap
   - masscan
   - 网络空间测绘平台，如shodan、fofa、360quake、zoomeye、hunter、censys等

## 目录信息收集

1. 从目录信息中可以寻找未授权访问、目录遍历、源码泄露、敏感文件泄露等
2. 收集方法
   - 御剑目录扫描、御剑后台扫描
   - dirsearch
   - dirbuster
   - dirb
   - subDomainsbrute

## 敏感信息

1. 包括备份文件、源码、robots.txt、后台管理页面、文件上传点、API接口、服务器配置信息、网站配置信息、数据库文件等
2. 收集方法：
   - 御剑扫描工具
   - dirbuster
   - dirsearch
   - dirb
   - subDomainsbrute
   - JSFinder
   - 谷歌hack语法

## 站点信息

1. 包括站点CMS指纹、WAF、编程语言等
2. 收集方法：
   - 在线识别平台，如潮汐指纹、云悉指纹、BugScanner
   - whatweb
   - Wappalyzer、WhatRuns
   - html特征
   - WAF识别：wafw00f

## 社工信息收集

1. 包括各种账号密码信息、电话号码、邮箱等
2. 收集方法：
   - 社工钓鱼，蜜罐yyds
   - 网站中存在的账号密码信息、电话号码、邮箱等
   - 备案号反查关联
   - 社工库
